---
layout: post
category: 运维
title: "BigCloud安装使用"
tag: [ linux ]
excerpt: BigCloud安装使用。
---

## 下载地址

https://mirrors.cmecloud.cn/bclinux/oe21.10/ISO/x86_64/release/BCLinux-for-Euler-21.10-everything-x86_64.iso

## 卸载 bclinux-license

服务器检查结果:
***信息***您的授权码是无效的，请获得正确的授权码来注册大云Linux操作系统。您可以使用'bclinux-license
-g'命令获得机器码，然后与我们联系帮您产生订阅从而获得正确的授权码。

```shell
rpm -qa | grep license
rpm -e bclinux-license-manager-4.0-1.oe2203.bclinux.x86_64  ## 卸载这个包
```

## 配置本地源

```shell
mount /dev/cdrom /mnt
mv /etc/yum.repos.d/BCLinux.repo{,.bak}
vi /etc/yum.repos.d/local.repo

[local]
name=BC-Linux-release - local
baseurl=file:///mnt
enabled=1
gpgcheck=0

yum clean all
yum makecache
```

## 升级 python3

### 安装编译工具和依赖库

```
yum groupinstall -y "Development Tools"
yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel libpcap-devel xz-devel libffi-devel
```

### 下载Python 3的源码

```
wget https://www.python.org/ftp/python/3.7.17/Python-3.7.17.tgz
```

将上面的链接中的3.7.17替换为你想安装的Python版本号，例如3.8.0。

### 解压源码包

```
tar xvf Python-3.7.17.tgz
```

### 编译安装

```
cd Python-3.7.17
./configure --enable-optimizations
make altinstall
```

使用altinstall是为了避免覆盖系统默认的Python版本。

### 更新Python链接

```
mv /usr/bin/python3{,.bak}
ln -s /usr/local/bin/python3.7 /usr/bin/python3
```

```shell
cp -rnp /usr/lib/python3.7/site-packages/* /usr/local/lib/python3.7/site-packages/
cp -rnp /usr/lib64/python3.7/site-packages/* /usr/local/lib/python3.7/site-packages/
```


### 验证安装

```
python3 --version
python3.7 --version
```

## 漏洞

### python CVE-2023-27043

Python 2.7.18 不需升级
Python 3.7.9  升级至 3.7.17

```
vi /etc/python/email.cfg
```

```
[email_addr_parsing]
PYTHON_EMAIL_DISABLE_STRICT_ADDR_PARSING = true
```

## vsftpd编译安装

### 下载vsftpd源码

```shell
wget https://security.appspot.com/downloads/vsftpd-3.0.5.tar.gz
```

### 编译vsftpd源码

64位的系统编译之前先要执行 `cp /lib64/libcap.so.1 /lib/libcap.so.1` 命令：
*注*：这里并没有用到

```shell
yum install -y libcap-devel
tar xzvf vsftpd-3.0.5.tar.gz
cd vsftpd-3.0.5
make
make install
```

### 问题参考

1. (vsftpd 3.0.3升级到3.0.5后的坑)[https://blog.csdn.net/u012134942/article/details/130251216]

## 卸载源码安装的软件

```shell
find /usr/local -name "软件名" -exec rm -rf {} \;
```
